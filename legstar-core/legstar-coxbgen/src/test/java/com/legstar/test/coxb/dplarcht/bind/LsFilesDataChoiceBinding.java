

package com.legstar.test.coxb.dplarcht.bind;

import com.legstar.coxb.ICobolBinding;
import com.legstar.coxb.common.CChoiceBinding;
import com.legstar.coxb.ICobolComplexBinding;
import com.legstar.test.coxb.dplarcht.LsFilesData;
import com.legstar.test.coxb.dplarcht.LsProgramsData;
import com.legstar.test.coxb.dplarcht.LsTransactionsData;
import com.legstar.coxb.host.HostException;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import com.legstar.test.coxb.dplarcht.LsItemsArray;

/**
 * LegStar Binding for Choice element:
 *   LsFilesData
 *   LsProgramsData
 *   LsTransactionsData
 * 
 * Represents a choice between 2 or more elements. A choice maps to a cobol
 * REDEFINES clause exposed as an xs:choice in the corresponding XML schema
 * 
 * This class was generated by LegStar Binding generator.
 */
public class LsFilesDataChoiceBinding 
             extends CChoiceBinding {

    /** Alternative binding bound to value object property LsFilesData(LsFilesData). */
    public ICobolComplexBinding _lsFilesData;
    /** Alternative binding bound to value object property LsProgramsData(LsProgramsData). */
    public ICobolComplexBinding _lsProgramsData;
    /** Alternative binding bound to value object property LsTransactionsData(LsTransactionsData). */
    public ICobolComplexBinding _lsTransactionsData;

    /** Logger. */
    private final Log _log = LogFactory.getLog(getClass());

    
    /**
     * Constructor for a Choice element.
     * 
     * @param bindingName the identifier for this binding
     * @param parentBinding a reference to the parent binding
     */
    public LsFilesDataChoiceBinding(
            final String bindingName,
            final ICobolComplexBinding parentBinding) {
        
        super(bindingName, null, parentBinding);
        setUnmarshalChoiceStrategyClassName(
            "com.legstar.coxb.cust.dplarcht.ChoiceSelector");
        initAlternatives();
    }

    /** Creates a binding property for each alternative. */
    private void initAlternatives() {
        if (_log.isDebugEnabled()) {
            _log.debug("Initializing started");
        }
        /* Create binding alternatives instances */

        _lsFilesData = new LsFilesDataBinding("LsFilesData",
               "LsFilesData", getParentBinding(), null);
        _lsFilesData.setCobolName("LS-FILES-DATA");
        _lsFilesData.setByteLength(64);
        _lsFilesData.setUnmarshalChoiceStrategyClassName(
            "com.legstar.coxb.cust.dplarcht.ChoiceSelector");
        _lsProgramsData = new LsProgramsDataBinding("LsProgramsData",
               "LsProgramsData", getParentBinding(), null);
        _lsProgramsData.setCobolName("LS-PROGRAMS-DATA");
        _lsProgramsData.setByteLength(64);
        _lsProgramsData.setRedefines("LS-FILES-DATA");
        _lsTransactionsData = new LsTransactionsDataBinding("LsTransactionsData",
               "LsTransactionsData", getParentBinding(), null);
        _lsTransactionsData.setCobolName("LS-TRANSACTIONS-DATA");
        _lsTransactionsData.setByteLength(64);
        _lsTransactionsData.setRedefines("LS-FILES-DATA");

        /* Add alternatives to alternatives list */
        addAlternative(_lsFilesData);
        addAlternative(_lsProgramsData);
        addAlternative(_lsTransactionsData);
 
        if (_log.isDebugEnabled()) {
            _log.debug("Initializing successful");
        }
    }
 
    /** {@inheritDoc} */
    public void setAlternativesValues() throws HostException {
        Object value;
        value = getLsItemsArray().getLsFilesData();
        if (_log.isDebugEnabled()) {
            _log.debug("Getting value from Value object property "
                    + "LsFilesData"
                    + " value=" + value);
        }
        _lsFilesData.setObjectValue(value);
        value = getLsItemsArray().getLsProgramsData();
        if (_log.isDebugEnabled()) {
            _log.debug("Getting value from Value object property "
                    + "LsProgramsData"
                    + " value=" + value);
        }
        _lsProgramsData.setObjectValue(value);
        value = getLsItemsArray().getLsTransactionsData();
        if (_log.isDebugEnabled()) {
            _log.debug("Getting value from Value object property "
                    + "LsTransactionsData"
                    + " value=" + value);
        }
        _lsTransactionsData.setObjectValue(value);

    }
    /** {@inheritDoc} */
    public void setPropertyValue(
            final int index) throws HostException {
        /* Set the Value object property value from binding object */
        ICobolBinding alt = getAlternativesList().get(index);

      /* Alternatives that are not bound to a value object property are ignored.
       * This includes Choices and dynamically generated counters
       * for instance.  */
        if (!alt.isBound()) {
            return;
        }

        Object bindingValue = alt.getObjectValue(alt.getJaxbType());
        if (_log.isDebugEnabled()) {
            _log.debug("Setting value of Value object property "
                    + alt.getJaxbName()
                    + " value=" + bindingValue);
        }
        switch (index) {
        case 0:
            getLsItemsArray().setLsFilesData(
                (LsFilesData) bindingValue);
            break;
        case 1:
            getLsItemsArray().setLsProgramsData(
                (LsProgramsData) bindingValue);
            break;
        case 2:
            getLsItemsArray().setLsTransactionsData(
                (LsTransactionsData) bindingValue);
            break;
        default:
            break;
        }
    }
    
    /** {@inheritDoc} */
    public Object getObjectValue(
            final Class < ? >  type) throws HostException {
        throw new HostException("Attempt to get value from choice binding "
                + getCobolName());
    }

    /** {@inheritDoc} */
    public void setObjectValue(final Object value) throws HostException {
        throw new HostException("Attempt to set value for choice binding "
                + getCobolName());
    }
    
    /** {@inheritDoc} */
    public boolean isSet() {
        /* A Choice is considered set if at least one of its alternatives
         * is set. */
        for (ICobolBinding alt : getAlternativesList()) {
            if (alt.isSet()) {
                return true;
            }
        }
        return false;
    }

    /** {@inheritDoc} */
    public Object getParentValueObject() throws HostException {
        return ((LsItemsArrayBinding) getParentBinding()).getLsItemsArray();
    }

    /**
     * @return the Value object bound to the parent of this choice
     * @throws HostException if parent bound Value object cannot be retrieved
     */
    public LsItemsArray getLsItemsArray() throws HostException {
        return (LsItemsArray) getParentValueObject();
    }
    
}

